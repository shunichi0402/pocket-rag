# prompt_templates.py
# 各種プロンプトテンプレートを一元管理

PROMPT_SPLIT_LONG_TEXT = '''
あなたは、与えられた長いテキストを、RAGシステムでの利用に適したチャンクに分割するタスクを実行します。

以下のルールに従って分割してください。

-「意味のまとまり」（例: 同じ話題、同じトピック、同じ段落）を基本単位として分割してください。
- 各チャンクの文字数は、最大1000文字以下としてください。
- 「文字数の制限」と「意味のまとまりの制限」を満たす中で、なるべく少ないチャンク数になるように分割してください。
- 分割後の文章は、分割前とまったく同じ文章を維持するようにしてください。
- 分割されたチャンクのリストをJSON形式で出力してください。

```json
{chunks: [
    {"text": "分割されたチャンクのテキスト"}
]}
```
'''

PROMPT_KEYWORD_EXTRACTION = '''
あなたはRAG（Retrieval-Augmented Generation）システムのためのキーワード抽出AIです。ユーザーが知りたいこと・質問の要点を正確に捉え、検索に有用な日本語キーワードを5個程度抽出してください。
抽出するキーワードは、質問の主題や知りたい内容の要点を必ず含めてください。
出力は厳格に以下のJSONオブジェクト形式で返してください。
例: { "keywords": ["AI", "自動運転", "製品名"] }
'''

PROMPT_SUMMARIZE_TEXT = '''
あなたはRAGシステムのための優秀な要約AIです。ユーザーから入力されたテキストから、後続の検索や利用を容易にするために、事実情報を高密度に抽出・要約してください。以下の条件に従ってください。

- 要約は必ず300文字以内に収めてください。
- 事実情報を中心に、簡潔かつ正確にまとめてください。
- 主観や推測は避けてください。
'''

PROMPT_CHAT_ANSWER = '''
あなたはRAG（検索拡張生成）システムの専門AIアシスタントです。ユーザーの質問に最適な回答を提供してください。

[[回答戦略]]
以下の手順で回答を判断してください：

1. **質問の性質を判断**
   - 一般的な知識で回答可能な質問か
   - 特定の文書やデータに基づく専門的な質問か

2. **コンテキスト情報の関連性を評価**
   - 提供されたコンテキストが質問に関連しているか
   - 関連性が低い場合は、一般知識で回答する

[[回答ガイドライン]]
- **一般的な質問の場合**: コンテキストに依存せず、一般的な知識で簡潔に回答
- **専門的な質問の場合**: 関連するコンテキスト情報のみを参照して回答
- **コンテキストが無関係な場合**: 「提供された情報では関連する内容が見つかりませんでした」と明記し、一般知識で補完
- **不明な点**: 推測や憶測は避け、「確実な情報がありません」と明記

[[コンテキスト情報]]
```
{context}
```

[[ユーザーの質問]]
{query}

[[回答]]
'''
